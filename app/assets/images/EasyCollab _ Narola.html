<!DOCTYPE html>
<!-- saved from url=(0046)http://192.168.1.201:81/EasyCollab/time_sheets -->
<html lang="en" style="" class=" js no-touch no-android chrome no-firefox no-iemobile no-ie no-ie10 no-ie11 no-ios"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <title>EasyCollab | Narola</title>
        <meta name="description" content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <!-- link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans" / -->
        <link href="http://192.168.1.201:81/EasyCollab/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
        
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/app.v2.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/app.v2new.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/flux.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/font.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/list.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/validationEngine.jquery.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/jquery-ui-1.10.3.custom.min.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/datepicker_bootstrap.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/pekeUpload.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/chosen.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/nestable.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/jquery.timeentry.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/bootstrap-wysihtml5.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/jquery-ui-timepicker-addon.css">
	<link rel="stylesheet" type="text/css" href="./EasyCollab _ Narola_files/jquery.tagit.css">

        
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.canvasjs.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.validate.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.validationEngine-en.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.validationEngine.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery-ui-1.10.3.custom.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/bootstrap-modal.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/bootstrap-modalmanager.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/bootstrap-wysihtml5.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/mootools-core.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/mootools-more.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/chosen.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/Locale.en-US.DatePicker.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/Picker.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/Picker.Attach.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/Picker.Date.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.uploadify.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.form.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/pekeUpload.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.timeentry.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/tag-it.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/app.v2.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.pjax.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/raphael-min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/morris.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.sortable.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery.nestable.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/demo.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/tinymce.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery-ui-1.11.0.min.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/jquery-ui-timepicker-addon.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/notify.js"></script>
	<script type="text/javascript" src="./EasyCollab _ Narola_files/ckeditor.js"></script><style>.cke{visibility:hidden;}</style>
    <style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style></head>
    <body style="">

<script>
$(function () {
	$.noConflict();
});
var permission = ["dashboard.my_project_all_technology","task_lists.add","task_lists.edit","task_lists.index","tasks.add","tasks.edit","tasks.index","tasks.comment","tasks.delete_self","employees.index","dashboard.include_in_available_resources","employees.show_in_assigned_to_of_task","time_sheets.add","time_sheets.edit_self","time_sheets.delete_self","time_sheets.index","users.change_password","employee.my_profile","notes.index","inquiries.technical","inquiries.include_in_follower","inquiriescomment.view","inquiriescomment.add","inquiriescomment.delete_self","skill.add","snacksorder.order","e_library.view_item","supports.add","supports.add_comment","todo_lists.access","forums.index","forumtopics.add","forumtopics.edit_self","forumposts.add","forumposts.edit_self","leave_request_add.index"];
;
</script>

<style>
	.error-message{ color: #ff2424;}
	#favorite_tag .inq_actionBtn { color: #ff2424;}
	h4.headTitle {  display: inline;  margin: 0 5px;}
	.subTitleMenu{  margin-left: 40px;}
	.subTitleMenu .sMenuItem{ font-size: 15px; padding: 5px; font-weight: 500; margin:0 5px;} 
	.subTitleMenu .sMenuItem:hover, 
	.subTitleMenu .sMenuItem:active,
	.subTitleMenu .sMenuItem.active{ border-bottom: 1px solid #ff2424;  color: #ff2424;  text-decoration: none;}
    .dropdown b.caret{border-top: 4px solid #fff;}
</style>

<section class="hbox stretch">

        <!-- .vbox -->
    <section id="content" style="position:relative; z-index:2;">

            <header class="header bg-black navbar navbar-inverse">
                <div class="collapse navbar-collapse pull-in">
                    <ul class="nav navbar-nav m-l-n">
                        <li>
                            <img style="width: 110px; margin-top: 10px;" src="./EasyCollab _ Narola_files/narola-infotech-white-logo-final.png">
                        </li>
                                                <li class="">
                            <a href="http://192.168.1.201:81/EasyCollab/users/dashboard">Dashboard</a>                        </li>

                                                    <li class="dropdown ">
                                <a href="http://192.168.1.201:81/EasyCollab/time_sheets#" class="dropdown-toggle" data-toggle="dropdown">
                                    Manage <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="http://192.168.1.201:81/EasyCollab/project_lists">Projects</a></li><li><a href="http://192.168.1.201:81/EasyCollab/employees">Employee</a></li><li><a href="http://192.168.1.201:81/EasyCollab/snackitems/ordersnacks">Order Snacks</a></li><li><a href="http://192.168.1.201:81/EasyCollab/snacksorders/my_order">My Order</a></li><li><a href="http://192.168.1.201:81/EasyCollab/mail_queues/pending_email">Mail</a></li><li><a href="http://192.168.1.201:81/EasyCollab/elibraries/order_library_items">Library</a></li><li><a href="http://192.168.1.201:81/EasyCollab/supports">Support Tickets</a></li><li><a href="http://192.168.1.201:81/EasyCollab/todo_lists">To-Do List</a></li><li><a href="http://192.168.1.201:81/EasyCollab/leave_requests/add">Leave Request</a></li>                                </ul>
                            </li>
                        
                                                    <li class="dropdown active">
                                <a href="http://192.168.1.201:81/EasyCollab/time_sheets#" class="dropdown-toggle" data-toggle="dropdown">
                                    Master <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="http://192.168.1.201:81/EasyCollab/time_sheets">Timesheet</a></li>                                </ul>
                            </li>
                        
                                                    <li class="dropdown ">
                                <a href="http://192.168.1.201:81/EasyCollab/time_sheets#" class="dropdown-toggle" data-toggle="dropdown">
                                    Marketing <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="http://192.168.1.201:81/EasyCollab/inquiries/indexviewnew">Inquiry Technical</a></li>                                </ul>
                            </li>
                        
                        

                        
                            <li class="">
                                <a href="http://192.168.1.201:81/EasyCollab/forums">Forum</a>                            </li>

                                            </ul>

                    <ul class="nav navbar-nav navbar-right">
                                                <li class="dropdown ">
                            <a href="http://192.168.1.201:81/EasyCollab/time_sheets#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="thumb-sm avatar pull-left m-t-n-xs m-r-xs">
                                    <img src="./EasyCollab _ Narola_files/5c5e72639872e_HimaniRupapara.png" class="img-circle" alt="">                                </span>Himani Rupapara <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu animated fadeInLeft">
                                <li>
                                                                    </li>
                                <li>
                                    <a href="http://192.168.1.201:81/EasyCollab/employees/my_profile">My Profile</a>                                </li>
                                <li>
                                    <a href="http://192.168.1.201:81/EasyCollab/users/change_password">Change Password</a>                                </li>
                                <li>
                                                                    </li>
                                <li>
                                    <a href="http://192.168.1.201:81/EasyCollab/users/logout" style="border-bottom:1px solid #DADADA">Logout</a>                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </header>

            <section class="vbox">
                <!-- ================ Content Part ===================== -->

                <style>
.fieldBox { margin-bottom: 10px !important; }
.fixWidth { width: 300px !important;}
#flashMessage { font-size: 14px !important; }
.headDivEffect { padding: 7px 0; font-size: 20px;}
#calculatorPopup .modal-content {  overflow-y: hidden;height: 250px; }
.PopDisplaytimesheetHr{ margin: 30px 0;}
.errMsg,label.error { color: #ff2424;  margin-top: 5px;}
i.fa { font-size: 18px; padding: 0 3px;margin: 0 5px;}
#searchForm .form-group{ margin-right: 15px;}
.MainTsBlock {margin-bottom: 30px;  display: inline-block;}
#projectItemDropbox_chosen .chosen-results{ height: 130px !important;}
.selectBoxNm label.error {    position: absolute;bottom: 0;}
.selectBoxNm label.error + .chosen-container{  margin-bottom: 30px;    }
</style>

<section class="scrollable" id="pjax-container">
    <section class="wrapper">
        <div class="tab-content">
            <section class="tab-pane active" id="wizard">
                <div class="panel">
                    <header class="header bg-light lter bg-gradient b-b">
                        <div id="headDiv" class="headDivEffect row">
                            <div class="col-sm-8">
                                <b>Timesheet</b>
                            </div>

                            <div class="col-sm-4" style="text-align: right">
                                <button id="calculatorPopupBtn" type="button" class="btn btn-warning">Hours Calculator</button>
                            </div>
                        </div>
                    </header>

                    <div id="errorMsgdisp">
                                            </div>

                    <div id="resultMessageDisplay" style="display: none;">
                        <i></i>
                    </div>

                    <div class="MainTsBlock">
                        <div class="add_new_pop_white">
                            <div class="row">
                                <h4 style="margin: 5px 15px 20px;" class="col-sm-2">
                                    <div class="input text"><input name="data[ts_date]" id="ts_datebox" class="form-control text-input date-selector ts_datepick hasDatepicker" value="27-Feb-2019" type="text" autocomplete="off"></div>                                </h4>
                            </div>

                            <div id="timesheetArea" class="col-sm-5">
                                <h3 class="col-sm-12 heading_timesheet">Fill Timesheet</h3>
                                <form action="http://192.168.1.201:81/EasyCollab/time_sheets" class="form-horizontal project_task_outer" id="timesheet-form" method="post" accept-charset="utf-8" novalidate="novalidate"><div style="display:none;"><input type="hidden" name="_method" value="POST"></div><input type="hidden" name="data[TimeSheet][ts_date]" id="ts_fill_date">                                <div class="form-group fieldBox">
                                    <label for="select-project" class="col-sm-3 control-label">Select Project</label>
                                    <div class="col-sm-8 selectBoxNm" style="margin-top: 5px;">
                                        <select name="data[TimeSheet][project_id]" id="select-project" class="form-control chosen-select" style="display: none;">
<option value="">Choose One</option>
<option value="1355">1 - Knowledge Upgrade</option>
</select><div class="chosen-container chosen-container-single" style="width: 398px;" title="" id="select_project_chosen"><a class="chosen-single" tabindex="-1"><span>1 - Knowledge Upgrade</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off"></div><ul class="chosen-results"><li class="active-result result-selected" data-option-array-index="0" style="">Choose One</li><li class="active-result" data-option-array-index="1" style="">1 - Knowledge Upgrade</li></ul></div></div>                                    </div>
                                </div>

                                <div class="form-group fieldBox">
                                    <label for="select-task" class="col-sm-3 control-label">Select Task</label>
                                    <div class="col-sm-8 selectBoxNm" style="margin-top: 5px;">
                                        <select name="data[TimeSheet][task_id]" id="select-task" class="form-control chosen-select" style="display: none;"><option value="6460-taskmaster">Ruby tutorial</option><option value="6461-taskmaster">Rails Tutorial</option></select><div class="chosen-container chosen-container-single" style="width: 398px;" title="" id="select_task_chosen"><a class="chosen-single" tabindex="-1"><span>Rails Tutorial</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off"></div><ul class="chosen-results"><li class="active-result result-selected" data-option-array-index="0" style="">Ruby tutorial</li><li class="active-result" data-option-array-index="1" style="">Rails Tutorial</li></ul></div></div>                                    </div>
                                </div>

                                <div class="form-group fieldBox">
                                    <label for="TimeSheetHours" class="col-sm-3 control-label">Hours</label>
                                    <div class="col-sm-8">
                                        <div class="input text"><input name="data[TimeSheet][hours]" class="form-control text-input timeSHourswithoutMinus" id="tshours" placeholder="Enter Hours" maxlength="4" type="text"></div>                                    </div>
                                </div>

                                <div class="form-group fieldBox">
                                    <label for="notes" class="col-sm-3 control-label">Notes</label>
                                    <div class="col-sm-8">
                                        <div class="input textarea"><textarea name="data[TimeSheet][notes]" id="notes" class="form-control text-input" placeholder="Detail" cols="30" rows="6"></textarea></div>                                    </div>
                                </div>

                                <div class="form-group fieldBox">
                                    <div class="col-sm-12 col-sm-offset-3">
                                        <button type="submit" class="btn btn-success">ADD</button>                                    </div>
                                </div>
                                </form>                            </div>


                            <div class="col-sm-2 text-center margin-bottom">
                                <strong style="font-size: 20px;">OR</strong>
                            </div>

                            <div id="holidayTimesheet" class="col-sm-5">
                                <h3 class="col-sm-12 heading_timesheet">Fill Leave or Specific Reason</h3>
                                <form action="http://192.168.1.201:81/EasyCollab/time_sheets" class="form-horizontal project_task_outer" id="timesheet-form2" method="post" accept-charset="utf-8" novalidate="novalidate"><div style="display:none;"><input type="hidden" name="_method" value="POST"></div><input type="hidden" name="data[TimeSheet][ts_date]" id="reason_date">                                <div class="form-group">
                                    <label for="select-notes" class="col-sm-3 control-label">Select Reason</label>
                                    <div class="col-sm-8 selectBoxNm" style="margin-top: 5px;">
                                        <select name="data[TimeSheet][notes]" class="form-control chosen-select" id="select_notes" style="display: none;">
<option value="">Choose One</option>
<option value="Came Late">Came Late</option>
<option value="Left Early">Left Early</option>
<option value="Halfday Leave">Halfday Leave</option>
<option value="Fullday Leave">Fullday Leave</option>
<option value="Multiple">More Than One Day</option>
</select><div class="chosen-container chosen-container-single" style="width: 398px;" title="" id="select_notes_chosen"><a class="chosen-single" tabindex="-1"><span>Choose One</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off"></div><ul class="chosen-results"></ul></div></div>                                    </div>
                                </div>

                                <div id="hrAreaDiv"></div>

                                <div class="form-group">
                                    <label for="select-notes" class="col-sm-3 control-label">Reason Notes</label>
                                    <div class="col-sm-8">
                                        <div class="input textarea"><textarea name="data[TimeSheet][reason_comment]" id="reason_comment" class="form-control text-input" placeholder="Detail" rows="4" cols="30"></textarea></div>                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-12 col-sm-offset-3">
                                        <button type="submit" class="btn btn-success">ADD</button>                                    </div>
                                </div>
                                </form>                            </div>
                        </div>

                        <div class="add_new_pop_white" style="min-height: 400px;">
                            <h3 class="heading_timesheet">Timesheet Report</h3>
                            <div id="searchForm">
                                <form action="http://192.168.1.201:81/EasyCollab/time_sheets" id="ReportForm" class="form-inline" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"></div>
                                <div class="form-group">
                                    <label for="fromDate" class="control-label">From :</label>
                                    <input name="data[Report][from_date]" class="form-control date-selector ts_datepick hasDatepicker" id="fromDate" value="27-Feb-2019" type="text" autocomplete="off">                                </div>

                                <div class="form-group">
                                    <label for="toDate" class="control-label">To :</label>
                                    <input name="data[Report][to_date]" class="form-control date-selector ts_datepick hasDatepicker" id="toDate" value="27-Feb-2019" type="text" autocomplete="off">                                </div>

                                <div class="form-group">
                                    <label for="projItem" class="control-label">Project :</label>
                                    <select name="data[Report][project_id]" id="projectItemDropbox" class="form-control chosen-select fixWidth" style="display: none;">
<option value="">Choose One</option>
<option value="1355">1 - Knowledge Upgrade</option>
</select><div class="chosen-container chosen-container-single" style="width: 300px;" title="" id="projectItemDropbox_chosen"><a class="chosen-single" tabindex="-1"><span>Choose One</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off"></div><ul class="chosen-results"></ul></div></div>                                </div>

                                <button type="button" id="SearchButton" class="btn btn-sm btn-primary">Search</button>                                </form>                            </div>
                            <hr>
                            <div class="table-responsive" style="margin: 20px 0;">
                                <table id="RecordList" class="table">
                                    <thead>
                                        <tr class="active">
                                            <th style="width: 20%;">Project</th>
                                            <th style="width: 25%;">Task</th>
                                            <th style="width: 10%;">Date</th>
                                            <th style="width: 10%;">Hours</th>
                                            <th style="width: 30%">Notes</th>
                                            <th colspan="2" style="width: 5%">Action</th>
                                        </tr>
                                    </thead>

                                    <tbody id="table-body-data">
                                                                            </tbody>
                                    <tfoot id="footRow">
                                                                            </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </section>
</section>

<!-- Calculator Popup-->
<div class="modal fade" id="calculatorPopup" tabindex="-1" role="dialog" aria-labelledby="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">Hours Calculator</h4>
            </div>

            <div class="modal-body">
                <form class="form-inline">
                    <div class="form-group">
                        <label class="sr-only" for="hours">Hours</label>
                        <input type="text" class="form-control" id="hours" placeholder="Hours" onkeyup="update_hours(this);">
                    </div>
                    <div class="form-group">
                        <label class="sr-only" for="minutes">Minutes</label>
                        <input type="text" class="form-control" id="minutes" placeholder="Minutes" onkeyup="update_hours(this);">
                    </div>
                </form>

                <div class="PopDisplaytimesheetHr">
                    <h5>Timesheet Hour(s) : <b><span id="timesheetHrPopup">0.00</span></b></h5>
                </div>

                <a href="http://192.168.1.201:81/EasyCollab/time_sheets#" class="btn btn-primary" data-dismiss="modal">Close</a>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
    var reason_noteArr = ['Came Late','Left Early','Halfday Leave','Fullday Leave','On Fullday Leave','On Halfday Leave'];

    $(document).ready(function(){

        var date = new Date();
        var currentMonth = date.getMonth();
        var currentDate = date.getDate();
        var currentYear = date.getFullYear();
        $(".ts_datepick").datepicker({
            dateFormat: 'dd-M-yy',
            maxDate: new Date(currentYear, currentMonth, currentDate),
        });

        setTimeout(function(){
            $('#resultMessageDisplay').fadeOut();
        }, 7000);


        /*$.validator.addMethod("check_notes", function(value,element){
            var project = $('#select-project').val();
            console.log(" LL :: ",project);
            if(!project){
                return false;
            }else{
                return true;
            }
        },'Please select project');*/

        $.validator.addMethod("check_notes", function(value, element) {
            var nmNotesVal = value.trim();
            if(!nmNotesVal){
                return false;
            }else{
                return true;
            }
        }, "Please enter proper notes");

        $.validator.addMethod("hours_limit", function(value, element) {
            var nmHoursVal = value.trim();
            if(nmHoursVal > 12){
                return false;
            }else{
                return true;
            }
        }, "You cannot fill timesheet more than 12 hours");

        $.validator.addMethod("leave_hours_limit", function(value, element) {
            var nmHoursVal1 = value.trim();
            if(nmHoursVal1 > 3){
                return false;
            }else{
                return true;
            }
        }, "You cannot fill timesheet more than 3 hours");

        $.validator.setDefaults({ ignore: ":hidden:not(select)" })
        $("#timesheet-form").validate({
            onfocusout: false,
            rules: {
                'data[TimeSheet][project_id]': "required",
                'data[TimeSheet][task_id]': "required",
                'data[TimeSheet][hours]': {
                    required: true,
                    number: true,
                    maxlength: 4,
                    hours_limit: true
                },
                'data[TimeSheet][notes]': {
                    required: true,
                    check_notes: true,
                },
            },
            messages: {
                'data[TimeSheet][project_id]': "Please select project",
                'data[TimeSheet][task_id]': "Please select task",
                'data[TimeSheet][hours]': {
                    required: "Please enter hours",
                    number: "Please enter proper hours",
                    maxlength: "You can enter only 4 characters as hours",
                    hours_limit: "You cannot fill timesheet more than 12 hours"
                },
                'data[TimeSheet][notes]': {
                    required: "Please enter notes",
                    check_notes: "Please enter proper notes",
                },
            },
            submitHandler: function(form) {
                form.submit();
                openModal();
            }
        });

        $("#timesheet-form2").validate({
            onfocusout: false,
            rules: {
                'data[TimeSheet][notes]': "required",
                'data[TimeSheet][hours]': {
                    required: true,
                    number: true,
                    maxlength: 4,
                    leave_hours_limit: true
                },
                'data[TimeSheet][fromDt]': "required",
                'data[TimeSheet][toDt]': "required",
                'data[TimeSheet][reason_comment]': {
                    required: true,
                    check_notes: true,
                },
            },
            messages: {
                'data[TimeSheet][notes]': "Please select option",
                'data[TimeSheet][hours]': {
                    required: "Please enter hours",
                    number: "Please enter proper hours",
                    maxlength: "You can enter only 4 characters as hours",
                    leave_hours_limit: "You cannot fill timesheet more than 3 hours"
                },
                'data[TimeSheet][fromDt]': "Please select date",
                'data[TimeSheet][toDt]': "Please select date",
                'data[TimeSheet][reason_comment]': {
                    required: "Please enter reason notes",
                    check_notes: "Please enter proper notes",
                },
            },
            submitHandler: function(form) {
                form.submit();
                openModal();
            }
        });

        $("#ts_datebox").change(function(){
            $("#ts_fill_date").val($(this).val());
            $("#reason_date").val($(this).val());
        });

		$('#calculatorPopupBtn').click(function(){
            $('#calculatorPopup').modal('show');
            $('#hours').val('');
            $('#minutes').val('');
            $('#timesheetHrPopup').html('0.00');
        });

        /*Validation for Map Value*/
        $("#hours, #minutes").keydown(function (e) {

            // Allow: backspace, delete, tab, escape,crl+c,crl+v,crl+x
            if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 67, 86, 88]) !== -1 ||
            // Allow: Ctrl+A, Command+A
                    (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                    // Allow: home, end, left, right, down, up
                            (e.keyCode >= 35 && e.keyCode <= 40)) {
                // let it happen, don't do anything
                return;
            }
            // Ensure that it is a number and stop the keypress
            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                e.preventDefault();
            }
        });


        /* FILL LEAVE OR SPECIFIC REASON */
        $('#select_notes').on('change', function(){
            var htmlCont = "";
            $('#hrAreaDiv').html('');
            if ($(this).val() == 'Came Late' || $(this).val() == 'Left Early') {
                htmlCont = "<div class='form-group'><label for='leaveHours' class='col-sm-3 control-label'>Hours</label>"
                    + "<div class='col-sm-8'>"
                    + "<input type='text' name='data[TimeSheet][hours]' "
                    + "placeholder='Enter Hours' class='form-control text-input' "
                    + " id='leaveHours' maxlength='4' onkeypress='return isNumber(event,`#leaveHours`);'/>"
                    + "</div></div>";

            } else if ($(this).val() == 'Multiple') {
                htmlCont = "<div class='form-group'><label for='fromDt' class='col-sm-3 control-label'>From Date</label>"
                    + "<div class='col-sm-8'>"
                    + "<input type='text' name='data[TimeSheet][fromDt]' "
                    + "placeholder='From Date' class='form-control date-selector ts_datepick "
                    + "text-input' id='fromDt' value='27-Feb-2019' />"
                    + "</div></div>";

                htmlCont += "<div class='form-group'><label for='toDt' class='col-sm-3 control-label'>To Date</label>"
                    + "<div class='col-sm-8'>"
                    + "<input type='text' name='data[TimeSheet][toDt]' "
                    + "placeholder='To Date' class='form-control date-selector ts_datepick "
                    + "text-input' id='toDt' value='27-Feb-2019' />"
                    + "</div></div>";
            }
            $('#hrAreaDiv').html(htmlCont);
        });

        /* Get Task according to project */
        $('#select-project').on('change', function(){
            var projectId = $(this).val();

            if (!projectId) {
				$('#select-task').html('<option value>Choose One</option>');
				$('#select-task').trigger('chosen:updated');
                return false;
            }
			openModal();
			$.ajax({
				url: '/EasyCollab/time_sheets/fill_task_list?project_id=' + projectId,
			}).done(function (data) {
				var selectTaskList = '';
				$.each(data, function (key, value) {
					selectTaskList += '<option value="' + key + '">' + value + '</option>';
				});
				$('#select-task').html(selectTaskList);
				$('#select-task').trigger('chosen:updated');
				closeModal();
			});
        });


        $('body').on('click', '.edit-timesheet', function(){
            var TimeSheetId = $(this).attr('id');
            TimeSheetId = TimeSheetId.replace("edit-", "");
            $('#timeSheetcreateddate-' + TimeSheetId).css('display', 'block');
            $('#timeSheetOriginalCreatedDate-' + TimeSheetId).css('display', 'none');
            $('#timeSheetHours-' + TimeSheetId).css('display', 'block');
            $('#timeSheetOriginalHours-' + TimeSheetId).css('display', 'none');
            $('#timeSheetNotes-' + TimeSheetId).css('display', 'block');
            $('#timeSheetOriginalNotes-' + TimeSheetId).css('display', 'none');
            $('#editSubmit-' + TimeSheetId).css('display', 'block');
            $(this).css('display', 'none');
        });

        /* Edit Function*/
        $('body').on('click', '.edit-save', function(){
            var editButtonId = $(this).attr('id');
            editButtonId = editButtonId.replace("editSubmit-", "");
            var fromDate = $('#fromDate').val();
            var toDate = $('#toDate').val();
            var hours = $('#timeSheetHours-' + editButtonId).val();
            var notes = $('#timeSheetNotes-' + editButtonId).val().trim();
            if (!fromDate) {
                fromDate = '27-Feb-2019';
            }

            if (!toDate) {
                toDate = '27-Feb-2019';
            }

            if (!hours || hours == 0) {
                $('#tsHrMsg-' + editButtonId).html('Please enter hour(s)');
                return false;
            }else if(hours > 12){
                $('#tsHrMsg-' + editButtonId).html('You cannot fill timesheet more than 12 hours');
                return false;
            }else if(!Number(hours)){
                $('#tsHrMsg-' + editButtonId).html('*Please enter proper hours');
                return false;
            }

            if (!notes) {
                $('#tsNtMsg-' + editButtonId).html('Please enter notes');
                return false;
            }
            openModal();
            $.ajax({
                type: 'POST',
                data: {timeSheetId: editButtonId, hours: hours, notes: notes, fromDate: fromDate, toDate: toDate},
                url: '/EasyCollab/time_sheets/editTimesheet',
            }).done(function (response) {
                if (response) {
                    location.reload();
                }
            });
        });

        /* Search Records */
        $("#SearchButton").on("click", function(){
            $('#footRow').html('');
            var fromDate, toDate;
            fromDate = $('#fromDate').val();
            toDate = $('#toDate').val();
            var projId = $('#projectItemDropbox').val();
            if (!fromDate) {
                fromDate = '27-Feb-2019';
            }

            if (!toDate) {
                toDate = '27-Feb-2019';
            }

            openModal();
            $('#table-body-data').html('');
            $.ajax({
                type: 'POST',
                data: {fromDate: fromDate, toDate: toDate, projId: projId},
                url: '/EasyCollab/time_sheets/searchRecords',
            }).done(function (response) {
                if (response == 1) {
                    $('#table-body-data').html('No Records Found.');
                } else {
                    showResponse(response);
                }
                $('#fromDate').val(fromDate);
                $('#toDate').val(toDate);
                closeModal();
            });
        });
    });

    function update_hours(){
        var minutes = 0;
        if ($('#minutes').val().length > 0){
            minutes = parseInt($('#minutes').val()) + minutes;
        }
        var realmin = minutes % 60;
        var hours = Math.floor(minutes/60);

        if ($('#hours').val().length > 0){
            hours = parseInt($('#hours').val()) + hours;
        }

        var total_hours = parseFloat(parseInt(hours * 60) + realmin)/60;
        total_hours = total_hours.toFixed(2);
        $('#timesheetHrPopup').html(total_hours);
    }

    /* Respons function */
    function showResponse(responseText) {
        $('#table-body-data tr').remove();
        var totHours = 0;
        $.each(responseText, function (key, value) {
            var dataTable = "";
            var projectname = "";
            totHours = totHours + parseFloat(value.TimeSheet.hours);
            if (value.Project.name != null){
                projectname = value.Project.name;
            }
            var taskname = "";
            if(value.Task.name != null){
                taskname = value.Task.name;
            }else if(value.Taskmaster.title != null){
                taskname = value.Taskmaster.title;
            }

            var projId = "";
            if (value.Project.reference_id != null) {
                projId = value.Project.reference_id + " - ";
            } else {
                projId = "";
            }
            dataTable += '<tr>'
                    + '<td>' + projId + projectname + '</td>'
                    + '<td>' + taskname + '</td>'
                    + '<td>' + value.TimeSheet.created_date + '</td>';

            dataTable += '<td>'
                    + '<input class="form-control timeSHourswithoutMinus" name="data[TimeSheetEdit][hours]" id="timeSheetHours-'
                    + value.TimeSheet.id + '" '
                    + 'value="' + value.TimeSheet.hours + '" old-hr="' + value.TimeSheet.hours + '" style="display:none;" maxlength="4" '
                    + 'type="text" required />'
                    + '<span class="hoursCal" id="timeSheetOriginalHours-' + value.TimeSheet.id + '">' + value.TimeSheet.hours + '</span>'
                    + '<span id="tsHrMsg-' + value.TimeSheet.id + '" class="errMsg"></span>'
                    + '</td>';

            if (inArray(value.TimeSheet.notes,reason_noteArr)){
                var reason_comment="";
                if(value.TimeSheet.reason_comment){
                    reason_comment = "<br/>"+value.TimeSheet.reason_comment;
                }
                dataTable += '<td><span id="minLeave-' + value.TimeSheet.id + '">'+value.TimeSheet.notes
                    + reason_comment+'</span></td>';
            } else {
                var not2 = br2nl(value.TimeSheet.notes);
                dataTable += '<td>'
                        + '<textarea rows="2" class="form-control" name="data[TimeSheetEdit][notes]" id="timeSheetNotes-'
                        + value.TimeSheet.id + '" style="display:none;" required>' + not2 + '</textarea>'
                        + '<span id="timeSheetOriginalNotes-' + value.TimeSheet.id + '">' + value.TimeSheet.notes + '</span>'
                        + '<span id="tsNtMsg-' + value.TimeSheet.id + '" class="errMsg"></span>'
                        + '</td>';
            }
            dataTable += '<td>';
            if (inArray(value.TimeSheet.notes,reason_noteArr)){
                dataTable += '';
            } else {
                dataTable += '<button type="submit" id="editSubmit-' + value.TimeSheet.id + '" '
                        + ' class="btn btn-sm btn-primary edit-save" style="display:none;">Update</button>'
                        + '<span id="edit-' + value.TimeSheet.id + '" style="cursor: pointer;" class="edit-timesheet">'
                        + '<i class="fa fa-edit"></i></span>';
            }
            dataTable += '</td><td><a href="/EasyCollab/time_sheets/delete/' + value.TimeSheet.id + '" '
                        + ' onclick="return confirm(`Are you want to sure to delete ?`)" class="delete_new">'
                        + '<i class="fa fa-trash-o"></i></a>';
            dataTable += '</td></tr>';

            $('#table-body-data').append(dataTable);

            $("#timeSheetcreateddate-" + value.TimeSheet.id).datepicker({
                dateFormat: 'd-M-yy'
            });
        });
        var footrow = "<tr class='active'><th>Total</th><th>-</th><th>-</th><th>" + totHours.toFixed(2)
                        + "</th><th>-</th><th colspan='2'>-</th><tr>";
        $('#footRow').html(footrow);
    }

    function br2nl(varTest) {
        return varTest.replace(/<br\s*\/?>/ig, "\r");
    }

    /* Check in array like php function */
    function inArray(needle, haystack) {
        var length = haystack.length;
        for(var i = 0; i < length; i++) {
            if(haystack[i] == needle) return true;
        }
        return false;
    }

    /* Number allow function */
    function isNumber(evt, element) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (
            (charCode != 46 || $(element).val().indexOf('.') != -1) &&      // “.” CHECK DOT, AND ONLY ONE.
            (charCode < 48 || charCode > 57))
            return false;

        return true;
    }

</script>
                <!-- =================================================== -->

                <a href="http://192.168.1.201:81/EasyCollab/time_sheets#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>
                <div id="fade" style="display: none;"></div>
                <div id="modal" style="display: none;">
                    <img id="loader" src="./EasyCollab _ Narola_files/loading.gif">
                </div>
            </section>
    </section>
    <div id="fadePopup"></div>
    <div id="modalPopup">
        <img id="loader" src="./EasyCollab _ Narola_files/loading.gif">
    </div>
</section>

<style>
.modal-backdrop, .modal-backdrop.in{z-index: 100!important;}

#fade,#fadePopup { display: none; position:absolute; top: 0%; left: 0%; width: 100%; height: 100%; background-color: #ababab; z-index: 100001; -moz-opacity: 0.8; opacity: .70; filter: alpha(opacity = 80); }

#modal,#modalPopup { display: none; position: absolute; top: 45%; left: 45%; width: 90px; height: 90px; padding: 24px 24px 0px; border: 3px solid #ababab; box-shadow: 1px 1px 10px #ababab; border-radius: 20px; background-color: white; z-index: 100002; text-align: center; overflow: auto; }

.ui-datepicker-month, .ui-datepicker-year{ color: #555;}
</style>

<script>
    function openModal() {
        document.getElementById('modal').style.display = 'block';
        document.getElementById('fade').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
        document.getElementById('fade').style.display = 'none';
    }

    function openPopupModal() {
        document.getElementById('modalPopup').style.display = 'block';
        document.getElementById('fadePopup').style.display = 'block';
    }

    function closePopupModal() {
        document.getElementById('modalPopup').style.display = 'none';
        document.getElementById('fadePopup').style.display = 'none';
    }

    function openDatePicker(datePickerFormId) {
        $("#datepicker-" + datePickerFormId).datepicker({
            dateFormat: 'd-M-yy'
        });
        $("#datepicker-" + datePickerFormId).datepicker('show');
        $(".chosen-select").chosen({
            no_results_text: "Oops, nothing found!"
        });
    }

    function taskCommentSubmit() {
        var comment = $('#commentBox').val();
        var taskId = $('#commentTaskId').val();
        openModal();
        $.ajax({
            url:'/EasyCollab/tasks/add_comment?taskId=' + taskId + '&comment=' + comment,
        }).done(function (response) {
            if (response[ 0]) {
                data = response[1];
                console.log(data);
                var employeeName = data.Comment.employeeName;
                var commentDate = data.Comment.commentDate;
                var commentTime = data.Comment.commentTime;
                var deletePermission = "";
                if (data.Comment.deletePermission) {
                    deletePermission = '<span onclick="deleteTaskComment(' + data.Comment.id + ')" class="pull-right"><i class="fa fa-trash-o"></i></span>';
                }
                var comment = '<li class="list-group-item" id="comment-li-' + data.Comment.id + '"><p>' + deletePermission + data.Comment.content + '</p><div class="edit_comment_sec"><small class="block text-muted flo_left"><i class="fa fa-user"></i> ' + employeeName + '</small><small class="block text-muted edit_comm_date"><i class="fa fa-calendar"></i> ' + commentDate + '</small><small class="block text-muted flo_right"><i class="fa fa-clock-o"></i> ' + commentTime + '</small></div></li>';
                $("#comment-ul").first().prepend(comment);
                $('#commentBox').val('');
                if (response[2] != null) {
                    var documents = response[2];
                    $.each(documents, function (key, value) {
                        var document = '<div class="file_attachment1" style="clear: both;"><i class="fa fa-file-o file_icon"></i><a href="/EasyCollab/documents/' + value.Document.name + '" target="_blank" style="color: #5dcff3 !important;">' + value.Document.name + '</a></div><div class="clearfix"></div>';
                        $("#taskDocument").first().append(document);
                    });
                }
            }
            closeModal();
        });
    }


    function taskComment(taskId) {
        $('#commentTaskId').val(taskId);
        openModal();
        $('#taskUpload').html('<input type="file" name="file"  id="comments"/>');
        $('#comments').pekeUpload({
            url: '/EasyCollab/tasks/upload/' + taskId,
            maxSize: 0,
            multi: true
        });
        $.ajax({
            url:'/EasyCollab/tasks/get_task_comment?taskId=' + taskId,
        }).done(function (response) {
            $("#comment-ul").children().remove();
            $("#taskDocument").children().remove();
            $("#taskDescription").val('');
            $(".table_main_part").addClass("custom");
            $(".side_part").show('slow');
            if (response[    0]) {
                $("#taskName").html('<span>' + response[1].Task.name + '</span>');
                if (response[1].Task.description != null) {
                    $("#taskDescription").val(response[1].Task.description);
                } else {
                    $("#taskDescription").attr('placeholder', 'No description');
                }

                $('#commentForm').show('slow');
                var comments = response[2];
                if (comments != null) {
                    $.each(comments, function (key, value) {
                        var employeeName = value.Comment.employeeName;
                        var commentDate = value.Comment.commentDate;
                        var commentTime = value.Comment.commentTime;
                        var deletePermission = "";
                        if (value.Comment.deletePermission) {
                            deletePermission = '<span onclick="deleteTaskComment(' + value.Comment.id + ')" class="pull-right"><i class="fa fa-trash-o"></i></span>';
                        }

                        var comment = '<li class="list-group-item" id="comment-li-' + value.Comment.id + '"><p>' + deletePermission + value.Comment.content + '</p><div class="edit_comment_sec"><small class="block text-muted flo_left"><i class="fa fa-user"></i> ' + employeeName + '</small><small class="block text-muted edit_comm_date"><i class="fa fa-calendar"></i> ' + commentDate + '</small><small class="block text-muted flo_right"><i class="fa fa-clock-o"></i> ' + commentTime + '</small></div></li>';
                        $("#comment-ul").first().append(comment);
                    });
                }

                if (response[3] != null) {
                    var documents = response[3];
                    $.each(documents, function (key, value) {
                        var document = '<div class="file_attachment1" style="clear: both;"><i class="fa fa-file-o file_icon"></i><a href="/EasyCollab/app/webroot/documents/' + value.Document.path + '" target="_blank" style="color: #5dcff3 !important;">' + value.Document.name + '</a></div><div class="clearfix"></div>';
                        $("#taskDocument").first().append(document);
                    });
                }
            }
            closeModal();
        });
    }

    function deleteTaskComment(commentId) {
        openModal();
        $.ajax({
            url:'/EasyCollab/tasks/comment_delete/' + commentId,
        }).done(function (response) {
            if (response) {
                $('#comment-li-' + commentId).remove();
            }
            closeModal();
        });
    }


    $(function () {
        $('.hide_box').click(function () {
            $(".side_part").css("display", "none");
            $(".table_main_part").removeClass("custom");
        });
        $('body').on('click', '.date-selector', function () {
            $(this).datepicker({
                dateFormat: 'd-M-yy'
            });
            $(this).datepicker('show');
        });

        $(".date-selector").datepicker({
            dateFormat: 'd-M-yy'
        });

        $(".date-selector-pre").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'd-M-yy',
            yearRange: "1960:2030",
        });

        $(".chosen-select").chosen({
            no_results_text: "Oops, nothing found!"
        });
    });
    $(function () {
        $('.time').timeEntry();
    });
</script>


<!-- Inquiry Reminder notification  -->
<script>
    $(document).ready(function () {

        $('.hasDatepicker').attr("autocomplete", "off");

        /* Inquiry Reminder */
        var notifyJson = [];
        $.each(notifyJson, function (index, value) {
            var inqRemId = value.id;
            var head = index;
            var project = 'Project : ' + value.project_name;
            var comment = 'Comment : ' + value.comment;
            var maindate = 'Reminder Time : ' + value.date;
            var body = project + "\n" + comment + "\n" + maindate;
            var differenttime = value.differenttime;
            setInterval(function () {
                differenttime = differenttime - 1;
                if (differenttime === 0) {
                    if (!Notify.needsPermission) {
                        doNotification(inqRemId, head, body);
                    } else if (Notify.isSupported()) {
                        Notify.requestPermission(onPermissionGranted, onPermissionDenied);
                    }
                }
            }, 1000);
        });
        /* ToDo Reminder */
        var $todoRemNotifyJson = [];
        $.each($todoRemNotifyJson, function (index, value) {
            var RemId = value.rem_id;
            var head = value.parent_title;
            var todo = 'ToDo : ' + value.title;
            var remdate = 'Reminder Time : ' + value.reminder_datetime;
            var body = todo + "\n" + remdate;
            var diff_datetime = value.diff_datetime;
            setInterval(function () {
                diff_datetime = diff_datetime - 1;
                if (diff_datetime === 0) {
                    if (!Notify.needsPermission) {
                        todoNotification(RemId, head, body);
                    } else if (Notify.isSupported()) {
                        Notify.requestPermission(onPermissionGranted, onPermissionDenied);
                    }
                }
            }, 1000);
        });

        /* All Notification */
        setInterval(function () {
            $.ajax({
                url: '/EasyCollab/notifications/get_notification_ajax',
            }).done(function (response) {
                if (response[0] == 1) {
                    $.each(response[1], function (index, value) {
                        var notify_id = value.id;
                        var body = value.title;
                        var link = value.link;
                        if (!Notify.needsPermission) {
                            mainNotification(notify_id, body, link);
                        } else if (Notify.isSupported()) {
                            Notify.requestPermission(onPermissionGranted, onPermissionDenied);
                        }
                    });
                }
            });
        }, 60000);

        /* Company Onchange*/
        $('#unm_company_id').on('change', function() {
            $('#unm_location_id').html("<option value=''>Choose One</option>");
            var company_id = $(this).val();
             $.ajax({
                 type: 'post',
                data: {company_id: company_id},
                url: '/EasyCollab/companies/get_location',
            }).done(function (response) {
                var dd = "<option value=''>Choose One</option>";
                $.each(response, function (index, value) {
                    dd += "<option value='"+index+"'>"+value+"</option>";
                });
                $('#unm_location_id').html(dd);
            });
        });

    });
    function onPermissionGranted() {
        doNotification();
        todoNotification();
        mainNotification();
    }

    function onPermissionDenied() {
        console.warn('Permission has been denied by the user');
    }

    /* all Notification */
    function mainNotification(notify_id, body, link) {
        var mainNotification = new Notify('Notification.. !', {
            body: body,
            tag: notify_id,
            timeout: 40,
            icon: '/EasyCollab/img/bell.png',
            notifyClose: function () {
                onCloseMainNotification(notify_id);
            },
            notifyClick: function () {
                onClickMainNotification(notify_id, link);
            }
        });
        mainNotification.show();
        var aud = '/EasyCollab/notification_audio.mp3';
        var audio = new Audio(aud);
        audio.play();
    }

    function onClickMainNotification(id, link) {
        window.open(link);
    }

    function onCloseMainNotification(id) {
        $.ajax({
            type: 'post',
            data: {id: id},
            url:'/EasyCollab/notifications/notification_read_ajax',
        }).done(function (response) {
            console.log(response);
        });
    }

    /* Close all Notification */



    /* Inquiry Reminder Functions */
    function doNotification(inqRemId, head, body) {
        var myNotification = new Notify(head, {
            body: body,
            tag: inqRemId,
            timeout: 40,
            icon: '/EasyCollab/img/bell.png',
            notifyClose: function () {
                onCloseNotification(inqRemId);
            },
            notifyClick: function () {
                onClickNotification(inqRemId);
            }
        });
        myNotification.show();
        var aud = '/EasyCollab/notification_audio.mp3';
        var audio = new Audio(aud);
        audio.play();
    }

    function onClickNotification(id) {
        var url = '/EasyCollab/inquiry_reminders/confirmation/' + id;
        var w = 400;
        var h = 400;
        var left = (screen.width / 2) - (w / 2);
        var top = (screen.height / 2) - (h / 2);
        var win = window.open(url, 'Reminder Popup', 'width=' + w + ', height=' + h + ', top=' + top + ', left=' + left + ',titlebar=no');
        win.focus();
    }


    function onCloseNotification(id) {
        $.ajax({
            type: 'post',
            data: {id: id},
            url:'/EasyCollab/inquiry_reminders/autoclose_snooze_ajax',
        }).done(function (response) {
            if (response != 1){
                var Inid = response[0];
                var head = response[1];
                var proj = response[2];
                var comment = response[3];
                var remdate = response[4];
                var body = proj + "\n" + comment + "\n" + remdate;
                var newSec = 15;
                setInterval(function () {
                    newSec = newSec - 1;
                    if (newSec === 0) {
                        if (!Notify.needsPermission) {
                            doNotification(Inid, head, body);
                        } else if (Notify.isSupported()) {
                            Notify.requestPermission(onPermissionGranted, onPermissionDenied);
                        }
                    }
                }, 1000);
            }
        });
    }

    /* Close Inquiry Reminder */


    /* ========================== */
    /* ToDo Reminder */

    function todoNotification(RemId, head, body) {
        var myNotification = new Notify(head, {
            body: body,
            tag: RemId,
            timeout: 60,
            icon: '/EasyCollab/img/bell.png',
            notifyClose: function () {
                onCloseTododRemNotification(RemId);
            },
            notifyClick: function () {
                onClickTododRemNotification(RemId);
            }
        });
        myNotification.show();
        var aud = '/EasyCollab/notification_audio.mp3';
        var audio = new Audio(aud);
        audio.play();
    }

    function onClickTododRemNotification(id) {
        var url = '/EasyCollab/todo_lists';
        window.open(url);
    }

    function onCloseTododRemNotification(id) {
        $.ajax({
            type: 'post',
            data: {id: id},
            url: '/EasyCollab/todo_lists/reminder_status_close_ajax',
        }).done(function (response) {
            console.log(response);
        });
    }

    /* Close Todo Reminder */

    /* inquiry_favorite */
    function inquiry_favorite(InqId,is_fav,techstatus_id){
        var htmlVal = "";
        var flag=0;
        var rowColor = "";
        if(techstatus_id == 2){
            rowColor = "dark_blue_nm";
        }else{
            rowColor = "light_blue_nm";
        }

        if(is_fav == 1){
            htmlVal = '<a href="javascript:inquiry_favorite('+InqId+',0,'+techstatus_id+')" title="Set Favorite" class="inq_actionBtn"><i class="fa fa-star-o"></i></a>';
            flag = 0;
            $('#row-'+InqId).removeClass(rowColor);
        }else{
            htmlVal = '<a href="javascript:inquiry_favorite('+InqId+',1,'+techstatus_id+')" title="Set Unfavorite" class="inq_actionBtn"><i class="fa fa-star"></i></a>';
            flag = 1;
            $('#row-'+InqId).addClass(rowColor);
        }

        $('#InqFav-'+InqId).html(htmlVal);
        $('#favorite_tag').html(htmlVal);

        $.ajax({
            type: "POST",
            data: {InqId: InqId, flag: flag},
            url:'/EasyCollab/inquiries/inquiry_favorite_on_off',
        }).done(function (response) {
            console.log("inquiry_favorite_on_off :: ",response);
        });
    }

    /* generate_key -- put class name : key_value */
    function generate_key(){
        var generate_str = Math.floor(Math.random() * 9988776655443322);
        $('.key_value').val(generate_str);
    }

    $('.timeSHours').keydown(function (e) {
        // Allow: minus(109,189), backspace, delete, tab, escape,., crl+c,crl+v,crl+x
        if ($.inArray(e.keyCode, [109, 189, 46, 8, 9, 27, 13, 110, 67, 86, 88]) !== -1 ||
            // Allow: Ctrl+A, Command+A
                    (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                    // Allow: home, end, left, right, down, up
                            (e.keyCode >= 35 && e.keyCode <= 40)) {
                // let it happen, don't do anything
                return;
        }
        // Ensure that it is a number and stop the keypress
        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
        }
    });

    $('.estimated_time, .timeSHourswithoutMinus').keydown(function (e) {
        // Allow: backspace, delete, tab, escape,., crl+c,crl+v,crl+x
        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 67, 86, 88]) !== -1 ||
            // Allow: Ctrl+A, Command+A
            (e.keyCode == 65 && (e.ctrlKey === true || e.metaKey === true)) ||
            // Allow: home, end, left, right, down, up
            (e.keyCode >= 35 && e.keyCode <= 40)) {
            // let it happen, don't do anything
            return;
        }
        // Ensure that it is a number and stop the keypress
        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
        }
    });

    setTimeout(function () {
        $('#ErrorMsgCommon, .retMsg').fadeOut();
    }, 7000);

</script>

    
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div></body></html>